<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>

    <link href="../prism.css" rel="stylesheet" />
    <link href="../programmingLessons.css" rel="stylesheet" />


    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS_SVG">
    </script>

    <style media="screen">

    </style>

  </head>
  <body>
    <h1>Writing Functions</h1>

    <div class="setup">
      Functions are bits of code that do specific things so you don't have to recreate the wheel every time you have to do something complicated. Given two points, can you write functions to find:
      <ol>
        <li>the slope of the line that connects them</li>
        <li>the intercept of the line that passes through them,</li>
        <li>the location of the mid-point between the two points</li>
        <li>the distance between them</li>
      </ol>

      We'll use these functions to find things like the perimeter of a shape, and the length of a curved line.


        Our test points:
        <pre>
          p1 = (-3, 1)
          p2 = (5, 7)
        </pre>

      <figure>
          <img src="tpf-01.png" style="width:400px;">
          <figcaption>The two points and the line between them.</figcaption>
      </figure>
    </div>


    <table>



      <tr>
        <th>Notes and Code</th>
        <th>Outcome</th>
      </tr>

      <!-- NEW ROW -->
      <tr>
        <td>
          <div class="comment">
            <h3>Plotting points</h3>
            First, let's plot the points. We'll do it a little differently from some of the other lessons because we want to make all these calculations about the points.
          </div>
          <div class="pythonCode">
            <pre class="line-numbers"><code class="language-python" >
              xaxis = curve(pos=[vec(-10,0,0), vec(10,0,0)])
              yaxis = curve(pos=[vec(0,-10,0), vec(0,10,0)])

              p1 = vec(-3,1,0)
              p2 = vec(5,7,0)

              s1 = sphere(pos=p1, radius=0.5, color=color.red)
              s2 = sphere(pos=p2, radius=0.5, color=color.yellow)

              line = curve(pos=[p1, p2])
              print("Point 1:", p1.x, ",", p1.y)

            </code></pre>
          </div>

          <div class="comment">

            <p>
              <b>Lines 4&5</b>: The two points are created as vectors and named <code>p1</code> and <code>p2</code>.
            </p>

            <p>
              <b>Lines 7</b>: Since the points are vectors, when we create sphere for the first point, we can set the position by using p1: <code>pos=p1</code>
            </p>

            <p>
              <b>Line 10</b>: We can also use <code>p1</code> and <code>p2</code> when we create the line between the points.
            </p>

            <p>
              <b>Line 11</b>: One of the reasons we're making the points vectors is that vectors have a few useful properties. One of these is the fact that you can refer to the x-coordinate of the vector using the dot notation. So, p1's x-coordinate is <code>p1.x</code>.
            </p>

          </div>
        </td>
        <td>
          <div class="graph">
            <img src="tpf-02.png" style="width:400px;">
          </div>
        </td>
      </tr>
      <!-- END ROW -->

      <!-- NEW ROW -->
      <tr>
        <td>

          <div class="comment">
            <h3>Slope Equation</h3>
            The slope between two points is given by:
            $$ m = \dfrac{y_2 - y_1}{x_2 - x_1} \tag{1}$$
          </div>

          We can calculate this within the code by doing:
          <div class="pythonCode" >
            <pre><code class="language-python">
              m = (p2.y - p1.y) / (p2.x - p1.x)

              print("The slope between the two points is:", m)
            </code></pre>
          </div>

        </td>
        <td>

          <div class="graph">
            <img src="tpf-03.png" style="width:400px;">
          </div>

        </td>
      </tr>
      <!-- END ROW -->

            <!-- NEW ROW -->
            <tr>
              <td>

                <div class="comment">
                  <h3>Slope Function</h3>
                  Now we'll write a function to get the slope.
                  $$ m = \dfrac{y_2 - y_1}{x_2 - x_1} \tag{1}$$

                  <p>
                    <b>Inputs:</b>
                    As you can see from the equation, you need four values (x<sub>1</sub>, y<sub>1</sub>, x<sub>2</sub>, and y<sub>2</sub>) to calculate the slope.
                  </p>

                  <p>
                    <b>Output/s:</b>
                    The equation calculates one value, the slope, so there will be only one output from our function.
                  </p>
                </div>

                We create the function like so:
                <div class="pythonCode" >
                  <pre class="line-numbers"><code class="language-python">
                    def slope(x1, y1, x2, y2):
                        s = (y2 - y1) / (x2 - x1)
                        return s

                    xaxis = curve(pos=[vec(-10,0,0), vec(10,0,0)])
                    yaxis = curve(pos=[vec(0,-10,0), vec(0,10,0)])

                    p1 = vec(-3,1,0)
                    p2 = vec(5,7,0)

                    s1 = sphere(pos=p1, radius=0.5, color=color.red)
                    s2 = sphere(pos=p2, radius=0.5, color=color.yellow)

                    line = curve(pos=[p1, p2])

                    print("Point 1:", p1.x, ",", p1.y)
                    print("Point 2:", p2.x, ",", p2.y)

                    m = slope(p1.x, p1.y, p2.x, p2.y)

                    print("The slope between the two points is:", m)
                  </code></pre>
                </div>

                <div class="comment">

                  The function is defined on <b>Lines 1-3</b>
                  <p>
                    <b>Lines 1</b>:
                    <ul>
                      <li>The <code>def</code> keyword indicates that we're defining a function.</li>
                      <li>the name of the function is <code>slope</code> </li>
                      <li>the inputs of the function are listed within parentheses.</li>
                    </ul>
                  </p>

                  <p>
                    <b>Line 2</b>: Here we calculate the slope.
                  </p>

                  <p>
                    <b>Line 3</b>: Here we <b>return</b> the value of the slope (<code>s</code>) to the program.
                  </p>

                  <p>
                    Functions stand alone. When you run the program, the function definition is stored in memory and saved until the function is <b>called</b>.
                  </p>

                  <p>
                    <b>Line 19</b>: <b>Calling the function</b>. The function is called by using its name, and <b>passing</b> the input values. The function returns the result to the place in the code where the function is called. This function call is a little clunky with the four inputs, so next we'll create another function that takes two vectors as inputs.
                  </p>

                </div>

              </td>
              <td>

                <div class="graph">
                  <img src="tpf-03.png" style="width:400px;">
                </div>

              </td>
            </tr>
            <!-- END ROW -->



      <!-- NEW ROW -->
      <tr>
        <td>

          <div class="comment">
            <h3>Function using vectors as inputs.</h3>

          </div>
          <div class="toggle-next">Show Notes ▼</div>
          <div class="pythonCode" hidden>
            <pre class="line-numbers"><code class="language-python">
              def slope(x1, y1, x2, y2):
                  s = (y2 - y1) / (x2 - x1)
                  return s

              def slopeVectors(v1, v2):
                  s = (v2.y - v1.y) / (v2.x - v1.x)
                  return s

              xaxis = curve(pos=[vec(-10,0,0), vec(10,0,0)])
              yaxis = curve(pos=[vec(0,-10,0), vec(0,10,0)])

              p1 = vec(-3,1,0)
              p2 = vec(5,7,0)

              s1 = sphere(pos=p1, radius=0.5, color=color.red)
              s2 = sphere(pos=p2, radius=0.5, color=color.yellow)

              line = curve(pos=[p1, p2])

              print("Point 1:", p1.x, ",", p1.y)
              print("Point 2:", p2.x, ",", p2.y)

              m = slopeVectors(p1, p2)

              print("The slope between the two points is:", m)
            </pre></code>
          </div>
          <div class="comment">

            <p>
              <b>Line 23</b>:
              The call to the new function is much simpler and, hopefully, more intuitive, now you sent only two values, the vectors for the two points.
            </p>

            <p>
              <b>Line 5-7</b>: The new function, called <code>slopeVectors</code> that calculates the slope using vector inputs.
            </p>

            <p>
              <b>Local Variables</b>: Notice that both functions (<code>slope</code> and <code>slopeVectors</code>) use the variable name <code>s</code> when they calculate the slope. This causes no conflice with each other, or with other places in the code where we might want to use a variable named <code>s</code> because <b> variables created in a function only exist in that function </b>. These are refered to as <em>local variables</em>.

            </p>



          </div>


        </td>
        <td>

          <div class="graph">
            <img src="tpf-03.png">
          </div>

        </td>
      </tr>
      <!-- END ROW -->

      <!-- NEW ROW -->
      <tr>
        <td>

          <div class="comment">
            <h3>Distance Function</h3>
            Write a function that calculates the distance between the two points. The equation is:

            $$ d = \sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2}$$

          </div>
          <div class="pythonCode">
            <div class="toggle-next">Show Notes ▼</div>
            <div class="test" hidden>

              <pre><code class="language-python">
                # no notes yet. You're flying solo.
              </code></pre>
            </div>
            <p>

          </div>

        </td>
        <td>

          <div class="graph">
            <img src="lr-05.png" >
          </div>

        </td>
      </tr>
      <!-- END ROW -->



      <!-- NEW ROW -->
      <tr>
        <td>

          <div class="comment">
            <h3>Intercept Function</h3>
            Write a function that calculates the intercept of the line that passes through the points:

          </div>
          <div class="pythonCode">
            <div class="toggle-next">Show Notes ▼</div>
            <div class="test" hidden>

              <pre><code class="language-python">
                # no notes yet. You're flying solo.
              </code></pre>
            </div>
            <p>

          </div>

        </td>
        <td>

          <div class="graph">
            <img src="lr-05.png" >
          </div>

        </td>
      </tr>
      <!-- END ROW -->

      <!-- NEW ROW -->
      <tr>
        <td>

          <div class="comment">
            <h3>Distance along a curve</h3>
            Take the following points and find the total distance along the curve. ...

            <p>
            Number of points: <input type="number" id="nPts" value="12" style="width:4em;">
            <input type="button" id="generatePts" value="Generate Points">

          </div>

        </td>
        <td>

          <div class="graph">
            <pre><code class="language-python" id="ptData">

            </code></pre>
            <p></p>
            Answer (total distance):
            <div class="toggle-next">Show Notes ▼</div>
            <div id="ptsDistance" hidden>
            </div>
            <p></p>
          </div>

        </td>
      </tr>
      <!-- END ROW -->


        </td>
      </tr>
      <!-- END ROW -->



    </table>

  </body>
  <script type="text/javascript" src="../jquery-3.6.0.min.js"></script>
  <script type="text/javascript" src="../prism.js"></script>
  <script type="text/javascript" src="../exercises.js"></script>
  <script type="text/javascript">

    function distance(v1, v2){
      d = ( (v1[1]-v2[1])**2 + (v1[0]-v2[0])**2 )**0.5;
      return d;
    }
    function arrToStr(a, varName="x"){
      let t = varName + " = [";
      for (let i = 0; i< a.length; i++){
        t += a[i] + ", ";
      }
      t = t.slice(0,-2) + "]";
      return t;
    }
    $("#generatePts").click(function(){

      let circleRadius = 5.0;
      let nNodes = parseInt($("#nPts").val())-1;
      console.log("clicked", nNodes);

      xs = [];
      ys = [];
      pts = [];

      let dAngle = 2 * Math.PI / nNodes;

      for (let i=0; i<nNodes; i++){
        let x = circleRadius * Math.cos(dAngle*i);
        let y = circleRadius * Math.sin(dAngle*i);
        xs.push(x.toFixed(2));
        ys.push(y.toFixed(2));
        pts.push([x.toFixed(2), y.toFixed(2)]);
      }

      pts.push(pts[0]);
      xs.push(xs[0]);
      ys.push(ys[0]);
      console.log( `pts = ${pts}`);
      console.log(arrToStr(xs));
      console.log(arrToStr(ys, "y"));

      $("#ptData").html(arrToStr(xs) + '\n' + arrToStr(ys, "y"));

      //calculate total distance
      let d = 0;
      for (let i=0; i<pts.length-1; i++){
        d += distance(pts[0], pts[1]);
        console.log(d);
      }

      $("#ptsDistance").html(d.toFixed(2));

    })

  </script>
</html>
