<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Line Class</title>

    <link href="../prism.css" rel="stylesheet" />
    <link href="../programmingLessons.css" rel="stylesheet" />


    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS_SVG">
    </script>
    <script type="text/javascript" src="../uSvg.js"></script>

    <style media="screen">

    </style>

  </head>
  <body>
    <h1>Find the Perpendicular Distance Between a Point and a Line</h1>

    <div class="setup">
      <div class="uSection">
        Find the shortest distance between the point:
        $$ p_1 = (-4, 6) $$
        and the line:
        $$ y = 2x-1$$
      </div>
      <div class="uSection">
        <script type="text/javascript">
          p1 = new uPoint(-4,6);
          line1 = new uLine(2, -1);
          svg = new uSvgGraph({elementInfo:{width:300,height:300, style:'border:5px inset grey;'}});
          svg.drawLinearFunction(line1, {style:{"stroke-width":"2"}});
          svg.labelLinearFunction(line1, {x:4, offset:new uPoint(0.5,-0.5), style:{"font-size":12, fill:"black"}});
          svg.drawPoint(p1, {style:{"stroke":"blue"}});
          svg.labelPoint(p1, new uPoint(-3,0.75), {style:{"font-size":12, fill:"blue"}});
          linePerp = svg.get_uLine_from_slope_and_point(line1.perpSlope(), p1, {drawPoint:false, drawLine:false});
          pIntersect = svg.get_intersection_of_two_uLines(line1, linePerp, drawPoint=false);
          //svg.labelPoint(pIntersect);
          svg.addLine(p1, pIntersect, {style:{stroke:"#0000ff","stroke-width":2, "stroke-dasharray":"4 3"}});
          console.log(p1, pIntersect, p1.distanceTo(pIntersect).toFixed(1));
          d = p1.distanceTo(pIntersect).toFixed(1);
          //svg.addText(`d = ${d}`, new uPoint(-3, 3), {style:{"font-size":12, fill:"blue"}});

        </script>
      </div>

      <div class="uSection">

        We can do this if we:
        <ol>
          <li>
            Find the equation of the perpendicular line that runs through the point.
          </li>
          <li>
            Find the intersection point of the line and the perpendicular line.
          </li>
          <li>
            Find the distance between the point and the intersection point.
          </li>
        </ol>

      </div>
    </div>


    <table>



      <tr>
        <th>Example</th>
        <th>Algebra</th>
      </tr>

      <!-- NEW ROW -->
      <tr>

        <td>
          <div class="uSection">
            <h3>1) Find the Equation of the Perpendicular Line (using the General Equations)</h3>

            <div class="uSection">
              <script type="text/javascript">
                p1 = new uPoint(-4,6);
                line1 = new uLine(2, -1);
                svg = new uSvgGraph({elementInfo:{width:300,height:300, style:'border:5px inset grey;'}});
                svg.drawLinearFunction(line1, {style:{"stroke-width":"2"}});
                svg.labelLinearFunction(line1, x=4, offset=new uPoint(0.5,-0.5), {style:{"font-size":12, fill:"black"}});
                svg.drawPoint(p1, {style:{"stroke":"blue"}});
                svg.labelPoint(p1, new uPoint(-3,-1), {style:{"font-size":12, fill:"blue"}});
                linePerp = svg.get_uLine_from_slope_and_point(line1.perpSlope(), p1, drawPoint=false, drawLine=false);
                svg.drawLinearFunction(linePerp, {style:{"stroke-width":"2", stroke:"blue"}})
                svg.labelLinearFunction(linePerp, {x:-9, offset:new uPoint(0.5,0.5), style:{"font-size":14, fill:"blue"}});

              </script>
            </div>

            We first need to find the equation of the perpendicular line.

            <p>
              The slope of the perpendicular line is the negative reciprocal of the slope of the line. So, for the line:
              $$ y = 2x - 1 \tag{1} $$
              the slope is <em>m</em>:
              $$ \text{slope} = 2 $$
              Therefore, the slope of the perpendicular line is:
              $$ \text{perpendicular slope} = m_p  $$
              $$ m_p = -\frac{1}{2} $$

              To find the equation of the perpendicular line we can substitute in the point (<em>p<sub>1</sub></em>) into the general equation for a straight line (Eqn 3) and solve for the intercept <em>b<sub>p</sub> </em>.
              $$ p_1 = (-4, 6) $$
              Equation for perpendicular line:
              $$ y = m_p x + b_p $$
              $$ 6 = -\frac{1}{2} (-4) + b_p $$
              Simplifying gives:
              $$ 6 = 2 + b_p $$
              Solving for <em>b<sub>p</sub> </em>, we subtract <em>m<sub>p</sub>x<sub>1</sub> </em> from both sides:
              $$\begin{aligned} 6 &= 2 + b_p \\
                                6 - 2 &= b_p \\
                                4 &= b_p \\
                                b_p &=  4
                                \end{aligned}$$
              Therefore the equation for the perpendicular line is:
              $$ y = -\frac{1}{2} x + 4 \tag{2}$$
            </p>
          </div>



        </td>
        <td>

          <div class="uSection">
            <h3>1) Find the Equation of the Perpendicular Line</h3>

            <div class="uSection">
              We first need to find the equation of the perpendicular line.

              <p>
                The slope of the perpendicular line is the negative reciprocal of the slope of the line. So, for the line:
                $$ y = mx + b \tag{3} $$
                the slope is <em>m</em>:
                $$ \text{slope} = m $$
                Therefore, the slope of the perpendicular line is:
                $$ \text{perpendicular slope} = m_p  $$
                $$ m_p = -\frac{1}{m} $$

                To find the equation of the perpendicular line we can substitute in the point (<em>p<sub>1</sub></em>) into the general equation for a straight line (Eqn 1) and solve for the intercept <em>b<sub>p</sub> </em>.
                $$ p_1 = (x_1, y_1) $$
                Equation for perpendicular line:
                $$ y = mx + b $$
                $$ y_1 = m_p x_1 + b_p $$
                Solving for <em>b<sub>p</sub> </em>, we subtract <em>m<sub>p</sub>x<sub>1</sub> </em> from both sides:
                $$\begin{aligned} y_1 &= m_p x_1 + b_p \\
                                  y_1 - m_p x_1 &= b_p \\
                                  b_p &=  y_1 - m_p x_1
                                  \end{aligned}$$

              </p>
            </div>

        </td>
      </tr>
      <!-- END ROW -->




      <!-- NEW ROW -->
      <tr>

        <td>

          <div class="uSection">
            <h3>2) Find the Intersection Point of the Two Lines</h3>

            <div class="uSection">
              <script type="text/javascript">
                p1 = new uPoint(-4,6);
                line1 = new uLine(2, -1);
                svg = new uSvgGraph({elementInfo:{width:300,height:300, style:'border:5px inset grey;'}});
                svg.drawLinearFunction(line1, {style:{"stroke-width":"2"}});
                svg.labelLinearFunction(line1, {x:4, offset:new uPoint(0.5,-0.5), style:{"font-size":12, fill:"black"}});
                svg.drawPoint(p1, {style:{"stroke":"blue"}});
                svg.labelPoint(p1, new uPoint(-3,-1), {style:{"font-size":12, fill:"blue"}});
                linePerp = svg.get_uLine_from_slope_and_point(line1.perpSlope(), p1, drawPoint=false, drawLine=false);
                svg.drawLinearFunction(linePerp, {style:{"stroke-width":"2", stroke:"blue"}})
                svg.labelLinearFunction(linePerp, {x:-9, offset:new uPoint(0.5,0.5), style:{"font-size":14, fill:"blue"}});
                pIntersect = svg.get_intersection_of_two_uLines(line1, linePerp, drawPoint=true, {style:{"stroke-width":"2", stroke:"red"}});
                svg.labelPoint(pIntersect, new uPoint(1,.25), {style:{"font-size":14, fill:"red"}});

              </script>
            </div>

          <div class="uSection">
            The lines intersect when they share the same x and y values, therefore at the point of intersection (<em>(x<sub>i</sub>, y<sub>i</sub>)</em>):
            $$ y = 2x - 1 \tag{1} $$
            $$ y = -\frac{1}{2} x + 4 \tag{2} $$
            if the y values are the same:
            $$ 2x - 1 = -\frac{1}{2} x + 4 $$
            then solving for x, we move all the terms with x to the same side:
            $$ \begin{align} 2x -1 &= -\frac{1}{2} x + 4 \\
                             2x + \frac{1}{2} x -1 &= 4 \end{align}$$
            and all the constants to the other side:
            $$ \begin{align} 2x + \frac{1}{2} x - 1 &= 4 \\
                             2x + \frac{1}{2} x  &= 4 + 1 \\
                             2x + \frac{1}{2} x  &= 5
                             \end{align}$$
            factor out the x:
            $$ \begin{align} 2x + \frac{1}{2} x  &= 5 \\
                             \left(2 + \frac{1}{2}\right) x &= 5 \\
                             \frac{5}{2} x &= 5
                              \end{align}$$
            and multiply by the reciprocal of the constant with the <em>x</em>:
            $$ \left( \frac{2}{5} \right) \cdot \frac{5}{2} x = 5 \cdot \left( \frac{2}{5} \right) $$
            to get:
            $$ x = 2 \tag{4}$$
            which we can plug into either one of the two equations (let's do the first one: Eqn 4) to get y:
            $$ y = 2 (2) - 1$$
            this:
            $$ y = 3 \tag{5}$$

            Therefore the intersection point is:
            $$ p_i = (2, 3) \tag{6} $$


          </div>

        </td>
        <td>

          <div class="uSection">
            <h3>2) Find the Intersection Point of the Two Lines</h3>

          <div class="uSection">
            The lines intersect when they share the same x and y values, therefore at the point of intersection (<em>(x<sub>i</sub>, y<sub>i</sub>)</em>):
            $$ y_i = mx_i + b \tag{7} $$
            $$ y_i = m_p x_i + b_p \tag{8} $$
            if the y values are the same:
            $$ mx_i + b = m_p x_i + b_p $$
            then solving for x<sub>i</sub>, we move all the terms with x to the same side:
            $$ \begin{align} m x_i + b &= m_p x_i + b_p \\
                             m x_i - m_p x_i + b &= b_p \end{align}$$
            and all the constants to the other side:
            $$ \begin{align} m x_i - m_p x_i + b &= b_p \\
                             m x_i - m_p x_i  &= b_p - b \end{align}$$
            factor out the x:
            $$ \begin{align} m x_i - m_p x_i  &= b_p - b \\
                             (m - m_p) x_i &= b_p - b \end{align}$$
            and divide:
            $$  \frac{(m - m_p) x_i}{(m - m_p)} = \frac{b_p - b}{(m - m_p)} $$
            to get:
            $$ x_i = \frac{b_p - b}{m - m_p} \tag{9}$$
            which we can plug into either one of the two equations (let's do the first one: Eqn 4) to get y:
            $$ y_i = m \frac{b_p - b}{m - m_p} + b \tag{10}$$

          </div>

        </td>

      </tr>
      <!-- END ROW -->


      <!-- NEW ROW -->
      <tr>
        <td>
          <div class="uSection">
            <h3>Find the Distance between the Two Points</h3>
            <div class="uSection">
              <script type="text/javascript">
                p1 = new uPoint(-4,6);
                line1 = new uLine(2, -1);
                svg = new uSvgGraph({elementInfo:{width:300,height:300, style:'border:5px inset grey;'}});
                svg.drawLinearFunction(line1, {style:{"stroke-width":"2"}});
                svg.labelLinearFunction(line1, {x:4, offset:new uPoint(0.5,-0.5), style:{"font-size":12, fill:"black"}});
                svg.drawPoint(p1, {style:{"stroke":"blue"}});
                svg.labelPoint(p1, new uPoint(-3,-1), {style:{"font-size":12, fill:"blue"}});
                linePerp = svg.get_uLine_from_slope_and_point(line1.perpSlope(), p1, {drawPoint:false, drawLine:false});
                pIntersect = svg.get_intersection_of_two_uLines(line1, linePerp, {drawPoint:true, style:{"stroke-width":"2", stroke:"red"}});
                svg.labelPoint(pIntersect, new uPoint(1,.25), {style:{"font-size":14, fill:"red"}});
                svg.addLine(p1, pIntersect, {style:{stroke:"#0000ff","stroke-width":2, "stroke-dasharray":"4 3"}});
                console.log(p1, pIntersect, p1.distanceTo(pIntersect).toFixed(1));
                d = p1.distanceTo(pIntersect).toFixed(1);
                svg.addText(`d = ${d}`, new uPoint(-3, 3), {style:{"font-size":12, fill:"blue"}});

              </script>
            </div>
          </div>

          <div class="uSection">
            We now have two points:
            $$ p_1 = (-4, 6) $$
            $$ p_i = (2, 3) $$

            The distance equation between points is:
            $$ d = \sqrt{(x_2-x_1)^2 + (y_2-y_1)^2} $$
            therefore:
            $$ d = \sqrt{(2-(-4))^2 + (3-6)^2} $$
            $$ d = \sqrt{(2+4)^2 + (-3)^2} $$
            $$ d = \sqrt{(6)^2 + (-3)^2} $$
            $$ d = \sqrt{36 + 9} $$
            $$ d = \sqrt{45} $$
            $$ d = 6.7 $$


          </div>

        </td>
        <td>
          <div class="uSection">
            We now have two points:
            $$ p_1 = (x_1, y_1) $$
            $$ p_i = (x_i, y_i) $$

            The distance equation between points is:
            $$ d = \sqrt{(x_2-x_1)^2 + (y_2-y_1)^2} $$
            therefore:
            $$ d = \sqrt{(x_i - x_1)^2 + (y_i - y_1)^2} $$

          </div>
        </td>
      </tr>
      <!-- END ROW -->




      <!-- NEW ROW -->
      <tr>
        <td>
          <div class="uSection">
            <h3>Assignment: Write a program</h3>
            <div class="uSection">
              Write a program to find the perpendicular distance between the point:
              <div id="AssignmentPoint" style='margin:1em 1em 1em 3em;'></div>
              and the line:
              <div id="AssignmentLine" style='margin:1em 1em 1em 3em; font-style: italic;'></div>
              <input type="button" id="AssignmentPointLineReset" value="Reset">
            </div>


          </div>


        </td>
        <td>
          <div class="uSection">
            Results:
            <div id="assignmentGraphDiv"></div>
            <div id="assignmentDistance"></div>
          </div>
          <div class="uSection">
            <script type="text/javascript">

              function perpLinePointAssignment() {
                x1 = Math.floor(Math.random()*18 - 9);
                y1 = Math.floor(Math.random()*18 - 9);
                m = (Math.floor(Math.random()*12 - 6)/2).toFixed(1);
                b = Math.floor(Math.random()*8 - 4);
                p1 = new uPoint(x1, y1);
                line1 = new uLine(m, b);

                pE = document.getElementById("AssignmentPoint");
                lE = document.getElementById("AssignmentLine");
                pE.innerHTML = `<em>p<sub>1</sub> = ${p1.asText()}`;
                lE.innerHTML = `${line1.asText()}`;

                svg = new uSvgGraph({divId:'assignmentGraphDiv', elementInfo:{width:300,height:300,  style:'border:5px inset grey;'}});

                console.log(line1.asText(), line1);

                svg.drawLinearFunction(line1, {style:{"stroke-width":"2"}});
                svg.labelLinearFunction(line1, {x:4, offset:new uPoint(0.5,-0.5), style:{"font-size":12, fill:"black"}});

                console.log('drawPoint', p1);
                svg.drawPoint(p1, {style:{"stroke":"blue"}});
                svg.labelPoint(p1, new uPoint(-3,-1), {style:{"font-size":12, fill:"blue"}});
                perpSlope = line1.perpSlope();
                if (perpSlope !== undefined) {
                  linePerp = svg.get_uLine_from_slope_and_point(perpSlope, p1, {drawPoint:false, drawLine:false});

                  console.log("pIntersect", linePerp);
                  pIntersect = svg.get_intersection_of_two_uLines(line1, linePerp, {drawPoint:true, style:{"stroke-width":"2", stroke:"red"}});
                }
                else {
                  pIntersect = new uPoint(p1.x, line1.b);
                }
                svg.labelPoint(pIntersect, new uPoint(1,.25), {style:{"font-size":14, fill:"red"}});

                console.log("addLine", p1, pIntersect);
                svg.addLine(p1, pIntersect, {style:{stroke:"#0000ff","stroke-width":2, "stroke-dasharray":"4 3"}});
                d = p1.distanceTo(pIntersect).toFixed(1);
                svg.addText(`d = ${d}`, new uPoint(-3, 3), {style:{"font-size":12, fill:"blue"}});

                document.getElementById('assignmentDistance').innerHTML = `Distance = ${d}`;
                return svg;
              }
              aSvg = perpLinePointAssignment();

              resetBut = document.getElementById("AssignmentPointLineReset");
              resetBut.addEventListener("click", function(){
                aSvg.remove();
                aSvg = perpLinePointAssignment();
              });

            </script>
          </div>

        </td>
      </tr>
      <!-- END ROW -->


    </table>

  </body>
  <script type="text/javascript" src="../jquery-3.6.0.min.js"></script>
  <script type="text/javascript" src="../prism.js"></script>
  <script type="text/javascript" src="../exercises.js"></script>

</html>
