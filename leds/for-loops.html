<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">

    <title>LED: For loops</title>

    <link rel="icon" type="image/png" href="ledFav-48.png" sizes="48x48">

    <link href="../prism.css" rel="stylesheet" />
    <link href="../programmingLessons.css" rel="stylesheet" />

    <script type="text/javascript" src="../uSvg-0.4.js"></script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS_SVG">
    </script>
    <script type="text/javascript" src="../jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="../exercises.js"></script>

    <script type="text/javascript">
      nPix = 20;
    </script>

    <style media="screen">

    </style>

  </head>
  <body>
    <!-- HEADERS -->
    <div class="nav">
      <a href="../leds/index.html">LEDs Index</a>
      <a href="../quickRef/">Python Quick Ref</a>
      <hr>
    </div>
    <!-- END HEADERS -->

    <div class="intro">
      <h1>Using <code>for</code> Loops </h1>

      <div style="">
        <div class="test" style='padding:2em;'>
          Using for loops to light groups of lights and to animate sequences.
        </div>

        <div class='alertNote'>
          <b>Note on Pico vs. Zero:</b>
          <ol>
            <li>For the Pico use <code>board.GP0</code> instead of <code>board.D18</code> because they are set up to use different input pins by default. </li>
          </ol>

        </div>

        <p>
          References:
          <ol>
            <li><a href="../quickRef/index.html#loops">QuickRef: Loops</a></li>
          </ol>

        </p>

      </div>
    </div>




    <div class="mainTable" >


      <!-- NEW ROW -->
        <!-- LEFT COLUMN -->
        <div class="uSection">
          <h2><code>for ... in ...</code> loops </h2>

          <p>
            Light up the first 10 lights.
          </p>

          <script type="text/javascript">
            var leds = getLEDs();
            for (let i=0; i<10; i++){
              leds[i].style.backgroundColor = "deepskyblue";
            }
          </script>

          <p>
            While you could type out all 10 lines of code, whenever you have to do the same thing over and over again, it's easier to make a loop.
          </p>
          <div class="pythonCode">
            <pre><code class="language-python" >
              for i in range(10):
                pixels[i] = (0,0,100)
            </code></pre>
          </div>

          <p>
            this makes a loop that repeats 10 times, but every time <b>i</b> takes a different value. <b>i</b> goes from 0 to 9: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]. Notice that in going from 0 to 9 there are 10 values.
          </p>

          <p>
            The <code>range</code> function has more flexibility than just this if you pass it more values. The general form is:
          </p>
          <div class="pythonCode">
            <pre><code class="language-python" >
              range(start, stop, step):
            </code></pre>
          </div>

          <p>
            <ol>
              <li><b>start</b>: starting value</li>
              <li><b>stop</b>: stopping value (actually, it stops at one less than this value)</li>
              <li><b>step</b>: how much to skip every time you go through the loop.</li>
            </ol>
          </p>

          <p>
            If you leave out the step value (e.g. <code>range(3, 10)</code>), it assumes a step of 1.
          </p>


          <p>
            So the full code to turn first every other light you can use a step of 2:
          </p>

          <script type="text/javascript">
            var leds = getLEDs();
            for (let i=0; i<10; i+=2){
              leds[i].style.backgroundColor = "deepskyblue";
            }
          </script>

          <div class="pythonCode">
            <pre class="line-numbers"><code class="language-python" >
            import board
            import neopixel

            pixels = neopixel.NeoPixel(board.D18, 20)

            for i in range(0, 10, 2):
              pixels[i] = (0,0,100)
            </code></pre>
          </div>

        </div>
        <!-- END LEFT COLUMN -->

        <!-- RIGHT COLUMN -->
        <div class="uSection">

          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">

              <h4> Assignment 1 </h4>

              Make the first 16 lights green.
              <script type="text/javascript">
                nPix = 20;  leds = getLEDs();
                for (let i=0; i<16; i+=1){
                  leds[i].style.backgroundColor = "lightGreen";
                }
              </script>
            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                for i in range(16):
                  pixels[i] = (0,100,0)
                </code></pre>
              </div>
            </div>
          </div>
          <!-- END ASSIGNMENT -->



          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">

              <h4> Assignment 2 </h4>

              Make the first 5 lights red, and the rest blue.
              <script type="text/javascript">
                nPix = 20;  leds = getLEDs();
                for (let i=0; i<5; i+=1){
                  leds[i].style.backgroundColor = "red";
                }
                for (let i=5; i<nPix; i+=1){
                  leds[i].style.backgroundColor = "deepskyblue";
                }
              </script>
            </div>

            <div class="toggle-next">Hint ▼</div>
            <div class="results" hidden>
              Use two loops.
            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                for i in range(5):
                  pixels[i] = (100,0,0)
                for i in range(5, 20):
                  pixels[i] = (0,0,100)
                </code></pre>
              </div>
            </div>


          </div>
          <!-- END ASSIGNMENT -->




          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">

              <h4> Assignment 3</h4>

              From light 4 to light 16 make every other light red.
              <script type="text/javascript">
                nPix = 20;  leds = getLEDs();
                for (let i=3; i<16; i+=2){
                  leds[i].style.backgroundColor = "red";
                }
              </script>
            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                for i in range(3, 16, 2):
                  pixels[i] = (100,0,0)
                </code></pre>
              </div>
            </div>


          </div>
          <!-- END ASSIGNMENT -->



          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">

              <h4> Assignment 4 </h4>

              Alternate the colors blue and red for the entire strip.

              <script type="text/javascript">
                nPix = 20;  leds = getLEDs();
                for (let i=0; i<nPix; i+=2){
                  leds[i].style.backgroundColor = "deepskyblue";
                }
                for (let i=1; i<nPix; i+=2){
                  leds[i].style.backgroundColor = "red";
                }
              </script>

              <p>
                Use loops to do this. However, you could also use a single loop and a conditional statement (<code>if</code>).
              </p>

            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                for i in range(0, 20, 2):
                  pixels[i] = (0,0,100)
                for i in range(1, 20, 2):
                  pixels[i] = (100,0,0)
                </code></pre>
              </div>
            </div>

            <div class="toggle-next">Code (if) ▼</div>
            <div class="results" hidden>
              <p>
                This uses the modulus operator (<b>%</b>) to check if the remainder when <b>i</b> is divided by 2. If <b>i</b> is even then the remainder is <b>0</b> so we make the LED blue, <b>else</b> we make it red.
              </p>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                for i in range(0, 20, 2):
                  if (i%2 == 0):
                    pixels[i] = (0,0,100)
                  else:
                    pixels[i] = (100,0,0)
                </code></pre>
              </div>

            </div>


          </div>
          <!-- END ASSIGNMENT -->



        </div>
        <!-- END RIGHT COLUMN -->

      <!-- END ROW -->




      <!-- NEW ROW -->
        <!-- LEFT COLUMN -->
        <div id="time-sequences" class="uSection">
          <h2>Light Sequences: Change over time </h2>

          <p>
            Make all of the lights light up one at a time (with a 0.25 second delay between each lighting up.)
          </p>

          <div class="LedAnimation">
            <input type="button" onclick="ex_light1()"  value="Play">
            <input type="button" onclick="resetLEDs()"  value="Reset">
            <script type="text/javascript">
              //create blank led strip
              var leds = getLEDs();

              function ex_light1(){
                animateLEDs( function(leds){
                  for (let i=0; i<leds.length; i++){
                    setTimeout(function(){
                      leds[i].style.backgroundColor = "red";
                    }, i*0.25*1000);
                  }
                })
              }

            </script>
          </div>

          <p>
            Here you just need to wait a moment (0.25 seconds to be exact) before lighting up the next light. We can do this by using the <b>time</b> module and the <b>sleep</b> function.
          </p>
          <p>
            First import <b>time</b>:
          </p>
            <pre><code class="language-python" >
              import time
            </code></pre>
          <p>
            Then use the <b>sleep</b> function to pause the program for the specified number of seconds, like so:
          </p>
          <pre class="language-python" ><code>
            time.sleep(0.25)
          </code></pre>

          <p>
            The <b>sleep</b> function needs to be inside the loop so that the loop pauses during each iteration. The full program would look like:
          </p>
          <pre class="language-python" data-line="3,9"><code>
                import board
                import neopixel
                import time

                pixels = neopixel.NeoPixel(board.D18, 20)

                for i in range(20):
                  pixels[i] = (10,0,0)
                  time.sleep(0.25)
              </code></pre>
        </div>
        <!-- END LEFT COLUMN -->

        <!-- RIGHT COLUMN -->
        <div class="uSection">

          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">

              <h4> Assignment 5 </h4>

                Light every other light, but pause 0.5 seconds before each new one lights up.

              <div class="LedAnimation">
                <input type="button" onclick="ex_light2()"  value="Play">
                <input type="button" onclick="resetLEDs()"  value="Reset">
                <script type="text/javascript">
                  //create blank led strip
                  var leds = getLEDs();

                  function ex_light2(){
                    animateLEDs( function(leds){
                      for (let i=0; i<leds.length; i+=2){
                        setTimeout(function(){
                          leds[i].style.backgroundColor = "red";
                        }, i*0.25*1000);
                      }
                    })
                  }
                </script>
              </div>
            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                for i in range(0, 20, 2):
                  pixels[i] = (0,100,0)
                  time.sleep(0.5)
                </code></pre>
              </div>
            </div>
          </div>
          <!-- END ASSIGNMENT -->


          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">

              <h4> Assignment 6 </h4>

                Make all of the lights green, keep them green for 0.5 seconds, and then change them to red going backwards from the end. Use a 0.1 second delay before each switch.

              <div class="LedAnimation">
                <input type="button" onclick="ex_light3()"  value="Play">
                <input type="button" onclick="resetLEDs()"  value="Reset">
                <script type="text/javascript">
                  //create blank led strip
                  var leds = getLEDs();

                  function ex_light3(){
                    animateLEDs( function(leds){

                      for (let i=0; i<leds.length; i+=1){
                        leds[i].style.backgroundColor = "green";
                      }

                      for (let i=0; i<leds.length; i+=1){
                        setTimeout(function(){
                          leds[19-i].style.backgroundColor = "red";
                        }, 0.5*1000 + i*0.1*1000);
                      }
                    })
                  }
                </script>
              </div>
            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                for i in range(0, 20):
                  pixels[i] = (0,100,0)
                for i in range(0, 20):
                  pixels[-i-1] = (100,0,0)
                  time.sleep(0.5)
                </code></pre>
              </div>
            </div>
          </div>
          <!-- END ASSIGNMENT -->


          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">

              <h4> Assignment 7 </h4>

                Over 2.5 seconds have a single light of the 20 light up and march across the strip, with all the other lights being black.

                <div class="LedAnimation">
                  <input type="button" onclick="ex_light7()"  value="Play">
                  <input type="button" onclick="resetLEDs()"  value="Reset">
                  <script type="text/javascript">
                    //create blank led strip
                    var leds = getLEDs();

                    function ex_light7(){
                      animateLEDs( function(leds){
                        for (let i=0; i<leds.length; i++){
                          setTimeout(function(){
                            if (i>0){
                              leds[i-1].style.backgroundColor = "black";
                            }
                            leds[i].style.backgroundColor = "red";
                          }, i*0.25*1000);
                        }
                      })
                    }
                  </script>
                </div>

            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                consider this a challenge problem.
                </code></pre>
              </div>
            </div>
          </div>
          <!-- END ASSIGNMENT -->




          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">

              <h4> Assignment 8 </h4>

                Have the last LED slowly light up to full red over 2 seconds.

                <div class="LedAnimation">
                  <input type="button" onclick="ex_glow()"  value="Play">
                  <input type="button" onclick="resetLEDs()"  value="Reset">
                  <script type="text/javascript">
                    //create blank led strip
                    var leds = getLEDs();

                    function ex_glow(){
                      animateLEDs( function(leds){
                        for (let i=0; i<20; i++){
                          setTimeout(function(){
                            leds[nPix-1].style.backgroundColor = `rgb(${i*12}, 0, 0)`;
                          }, i*2000/20);
                        }
                      })
                    }
                  </script>
                </div>

            </div>

            <div class="toggle-next">Notes ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                the color codes are set as (red, green, blue), and the maximum for each value is 255
                </code></pre>
              </div>
            </div>
          </div>
          <!-- END ASSIGNMENT -->






        </div>
        <!-- END RIGHT COLUMN -->

      <!-- END ROW -->



      <!-- NEW ROW -->
        <!-- LEFT COLUMN -->
        <div class="uSection">
          <h2>Repeating sequences: Nesting Loops </h2>

          <p>
            Light up every light (0.25 second delay) and repeat this sequence three times. Wait 0.5 seconds in between each sequence.
          </p>

          <div class="LedAnimation">
            <input type="button" onclick="ex_nest1()"  value="Play">
            <input type="button" onclick="resetLEDs()"  value="Reset">
            <script type="text/javascript">
              //create blank led strip
              var leds = getLEDs();
              var ct = 0;

              function ex_nest1(){
                animateLEDs( function(leds){
                  for (let i=0; i<leds.length; i++){
                    setTimeout(function(){
                      leds[i].style.backgroundColor = "red";
                      if (i === leds.length-1){
                        ct++;
                        console.log("ct: ", ct)
                        if (ct < 3) {
                          setTimeout(ex_nest1(), 2000);
                        } else {
                          ct = 0;
                        }
                      }
                    }, i*0.25*1000);
                  }
                })
              }

            </script>
          </div>

          <p>
            You can place loops within loops to get this done.
          </p>

          <pre class="language-python" data-line="7,11"><code>
                import board
                import neopixel
                import time

                pixels = neopixel.NeoPixel(board.D18, 20)

                for n in range(3):
                  for i in range(20):
                    pixels[i] = (10,0,0)
                    time.sleep(0.25)
                  time.sleep(0.5)
              </code></pre>

          <p>
            In python, loops are defined by the indentation. So, notice how the inner loop (<code>for i in range(20)</code> is fully indented relative to the outer loop (<code>for n in range(3)</code>).
          </p>
          <p>
            Also notice how the pause between the sequences (line 11) is dedented so it's not in the sequence loop, but still in the <b>n</b> loop.
          </p>
        </div>

        <!-- END LEFT COLUMN -->

        <!-- RIGHT COLUMN -->
        <div class="uSection">

          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">

              <h4> Assignment 9 </h4>

                Make a single light go back and forth 5 times.

              <div class="LedAnimation">
                <input type="button" onclick="ex_nest_forward()"  value="Play">
                <input type="button" onclick="resetLEDs()"  value="Reset">
                <script type="text/javascript">
                  //create blank led strip
                  var leds = getLEDs();
                  var ct = 0;

                  function ex_nest_forward(){
                    animateLEDs( function(leds){
                      console.log('f: ct:',ct);
                      for (let i=0; i<leds.length; i++){
                        setTimeout(function(){
                          if (i>0){
                            leds[i-1].style.backgroundColor = "black";
                          }
                          leds[i].style.backgroundColor = "red";

                          if (i === leds.length-1){
                            ct++;
                            console.log("ct: ", ct)
                            if (ct < 5) {
                              setTimeout(ex_nest_backward(), 0.25*1000);
                            } else {
                              ct = 0;
                            }
                          }
                        }, i*0.25*1000)

                      }

                    })
                  }
                  function ex_nest_backward(){
                    animateLEDs( function(leds){
                      console.log('b: ct:',ct);
                      for (let i=0; i<leds.length; i++){
                        setTimeout(function(){
                          if (i>0){
                            leds[leds.length-i].style.backgroundColor = "black";
                          }
                          leds[leds.length-i-1].style.backgroundColor = "red";

                          if (i === leds.length-1){
                            ct++;
                            if (ct < 5) {
                              setTimeout(ex_nest_forward(), 0.25*1000);
                            } else {
                              ct = 0;
                            }
                          }
                        }, i*0.25*1000)

                      }

                    })
                  }
                </script>
              </div>
            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                you got this.
                </code></pre>
              </div>
            </div>
          </div>
          <!-- END ASSIGNMENT -->



          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">

              <h4> Assignment 10 </h4>

                Make the last led pulse. Have it light up to full red over 2 seconds, then fade to black over the next two seconds. Repeat this pulse 5 times.

                <div class="LedAnimation">
                  <input type="button" onclick="ex_glowPulse()"  value="Play">
                  <input type="button" onclick="resetLEDs()"  value="Reset">
                  <script type="text/javascript">
                    //create blank led strip
                    var leds = getLEDs();
                    var ct = 0;

                    function ex_glowPulse(){
                      for (let i = 0; i <=3; i++){
                        setTimeout(function(){
                          ex_glowUp();
                        }, i*2*1000);
                        setTimeout(function(){
                          ex_glowDown();
                        }, (i*2+1)*1000);

                      }
                    }

                    function ex_glowUp(startTime=0){
                      console.log('up startTime:', startTime)
                      animateLEDs(
                        function(leds){
                          for (let i=0; i<20; i++){
                            setTimeout(function(){
                              leds[nPix-1].style.backgroundColor = `rgb(${i*13}, 0, 0)`;
                            }, startTime + (i*50));
                          }
                        }
                      )
                    }

                    function ex_glowDown(startTime=0){
                      console.log('up startTime:', startTime)
                      animateLEDs(
                        function(leds){
                          for (let i=0; i<20; i++){
                            setTimeout(function(){
                              leds[nPix-1].style.backgroundColor = `rgb(${(19-i)*13}, 0, 0)`;
                            }, startTime + (i*50));
                          }
                        }
                      )
                    }


                  </script>
                </div>

            </div>

            <div class="toggle-next">Notes ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                the color codes are set as (red, green, blue), and the maximum for each value is 255
                </code></pre>
              </div>
            </div>
          </div>
          <!-- END ASSIGNMENT -->





          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">

              <h4> Assignment 11 </h4>

                Create an animation sequence of your own.
            </div>
          </div>
          <!-- END ASSIGNMENT -->



        </div>
        <!-- END RIGHT COLUMN -->

      <!-- END ROW -->






    </div>

    <!-- FOOTER -->
    <div class="nav">
      <hr>
      <a href="./lighting-lights.html">Prev: Lighting Lights</a>
      <a href="../leds/index.html">LEDs Index</a>
      <a href="./if.html">Next: If statements</a>
    </div>
    <!-- END FOOTER -->


  </body>

  <script type="text/javascript" src="../prism.js"></script>
  <script type="text/javascript" src="../exercises.js"></script>

</html>
