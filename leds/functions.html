<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">

    <title>LED: Functions</title>

    <link rel="icon" type="image/png" href="ledFav-48.png" sizes="48x48">

    <link href="../prism.css" rel="stylesheet" />
    <link href="../programmingLessons.css" rel="stylesheet" />

    <script type="text/javascript" src="../uSvg-0.4.js"></script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS_SVG">
    </script>
    <script type="text/javascript" src="../jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="../exercises.js"></script>
    <script type="text/javascript" src="./ledFuncs.js"></script>

    <script type="text/javascript">
      nPix = 20;
    </script>

    <style media="screen">

    </style>

  </head>
  <body>
    <!-- HEADERS -->
    <div class="nav">
      <a href="../leds/index.html">LEDs Index</a>
      <a href="../quickRef/">Python Quick Ref</a>
      <hr>
    </div>
    <!-- END HEADERS -->

    <div class="intro">
      <h1>Functions </h1>

      <div style="">
        <div class="test" style='padding:2em;'>
          Functions are bits of code that do specific things so you don't have to recreate the wheel every time you have to do something. The idea is that you can hide the inner working of the function, which makes it easier to think about other things you're trying to do.

          <p>Functions should make life easier.</p>
        </div>

        <div class='alertNote'>
          <b>Note on Pico vs. Zero:</b>
          <ol>
            <li>For the Pico use <code>board.GP0</code> instead of <code>board.D18</code> because they are set up to use different input pins by default. </li>
          </ol>

        </div>

        <p>
          References:
          <ol>
            <li><a href="../quickRef/index.html#functions">QuickRef: Functions</a></li>
          </ol>

        </p>

      </div>
    </div>




    <div class="mainTable" >


      <!-- NEW ROW -->
        <!-- LEFT COLUMN -->
        <div class="uSection">
          <h2> Why Functions </h2>

          <p>
            To turn off all the lights we just need a simple loop:
          </p>

          <div class="pythonCode">
            <pre class="line-numbers"><code class="language-python" >
            for i in range(20):
              pixels[i] = (0,0,0)
            </code></pre>
          </div>

          <p>
            However, as we write more interesting lighting sequences, we'll find that we need to do this quite often, so we can create a shortcut that we'll call a function.
          </p>




        </div>
        <!-- END LEFT COLUMN -->

        <!-- RIGHT COLUMN -->
        <div class="uSection">


          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div id="functions-assignment-1" class="instruction">

              <h4> Assignment 1 </h4>

              Write a program to do the following,
              <ol>
                <li>
                  Light up all of the lights (green) (in sequence with a 0.1 second delay),
                </li>
                <li>
                  Turn off the lights
                </li>
                <li>
                  Wait for 1 second,
                </li>
                <li>
                  Light up all the lights again (red)
                </li>
                <li>
                  Turn off the lights
                </li>
              </ol>


              <div class="LedAnimation">
                <input type="button" onclick="ex_fpat1()"  value="Play">
                <input type="button" onclick="resetLEDs()"  value="Reset">
                <script type="text/javascript">
                  //create blank led strip
                  var leds = getLEDs();
                  var ct = 0;

                  function ex_fpat1(){
                    animateLEDs( function(leds){
                      t = lightSequence(leds, { color:"lightgreen"});
                      t = clearLeds(leds, {startTime:t, pauseAfter:1});
                      t = lightSequence(leds, {startTime:t});
                      t = clearLeds(leds, {startTime:t});

                    })
                  }

                </script>
              </div>

            </div>

            <div class="toggle-next">Code â–¼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel
                import time

                pixels = neopixel.NeoPixel(board.GP0, 20)

                # make lights green in sequence
                for i in range(20):
                  pixels[i] = (0,10,0)
                  time.sleep(0.1)

                # turn off lights
                for i in range(20):
                  pixels[i] = (0,0,0)

                # wait 1 second
                time.sleep(1)

                # make lights red in sequence
                for i in range(20):
                  pixels[i] = (10,0,0)
                  time.sleep(0.1)

                # turn off lights
                for i in range(20):
                  pixels[i] = (0,0,0)

                </code></pre>
              </div>
            </div>


          </div>
          <!-- END ASSIGNMENT -->




        </div>
        <!-- END RIGHT COLUMN -->

      <!-- END ROW -->





      <!-- NEW ROW -->
        <!-- LEFT COLUMN -->
        <div class="uSection">

          <h2>Writing Functions (Turn off the lights) </h2>

          <p>
            A function to turn off the lights looks like this:
          </p>

          <div class="pythonCode">
            <pre class="line-numbers"><code class="language-python" >
              def lightsOff():
                for i in range(20):
                  pixels[i] = (0,0,0)
            </code></pre>
          </div>

          <p>
            <ul>
              <li><code>def lightsOff():</code> </li>
              <ul>
                <li>Define the function and give it a name "lightsOff"</li>
              </ul>
              <li>Everything tabbed over after the function definition is in the function: it's what's done when the function is <em>called</em>.</li>
              <li>The function is usually defined at or near the top of the code (later on we'll actually put it in its own file.)</li>
              <li>The function is <b><em>called</em></b> in the program when it's needed. </li>
            </ul>
          </p>

          <p>
            Let's redo <a href="#functions-assignment-1">Assignment 1</a> but use a function to turn the lights off. The function is defined on lines 7-10.
          </p>

          <div class="LedAnimation">
            <input type="button" onclick="ex_fpat2()"  value="Play">
            <input type="button" onclick="resetLEDs()"  value="Reset">
            <script type="text/javascript">
              //create blank led strip
              var leds = getLEDs();
              var ct = 0;

              function ex_fpat2(){
                animateLEDs( function(leds){
                  t = lightSequence(leds, { color:"deepskyblue"});
                  t = clearLeds(leds, {startTime:t, pauseAfter:1});
                  t = lightSequence(leds, {startTime:t});
                  t = clearLeds(leds, {startTime:t});

                })
              }

            </script>
          </div>

          <div class="pythonCode">
            <pre class="line-numbers" data-line="7-10,20,31"><code class="language-python" >
            import board
            import neopixel
            import time

            pixels = neopixel.NeoPixel(board.GP0, 20)

            # FUNCTION: to turn off all the lights
            def lightsOff():
              for i in range(20):
                pixels[i] = (0,0,0)


            # MAIN PROGRAM STARTS HERE
            # make lights blue in sequence
            for i in range(20):
              pixels[i] = (0,0,10)
              time.sleep(0.1)

            # CALL the function to turn off lights
            lightsOff()

            # wait 1 second
            time.sleep(1)

            # make lights red in sequence
            for i in range(20):
              pixels[i] = (10,0,0)
              time.sleep(0.1)

            # CALL the function to turn off lights
            lightsOff()

            </code></pre>
          </div>

          <p>

          </p>


        </div>
        <!-- END LEFT COLUMN -->

        <!-- RIGHT COLUMN -->
        <div class="uSection">


        </div>
        <!-- END RIGHT COLUMN -->

      <!-- END ROW -->







      <!-- NEW ROW -->
        <!-- LEFT COLUMN -->
        <div class="uSection">

          <h2 id="infinite-loops">Infinite Loops </h2>

          <p>
            Sometimes you want your program to run forever. Then you can create an infinite loop using a <code>while</code> condition that is always true, such as:
          </p>

          <div class="pythonCode">
            <pre><code class="language-python" >
                while True:
            </code></pre>
          </div>

          So, let's take a program that lights up every other light (0.1 second delay between lights),

          <div class="LedAnimation">
            <input type="button" onclick="ex_2x2()"  value="Play">
            <input type="button" onclick="resetLEDs()"  value="Reset">
            <script type="text/javascript">
              //create blank led strip
              var leds = getLEDs();
              var ct = 0;

              function ex_2x2(){
                animateLEDs( function(leds){
                  for (let i=0; i<leds.length; i+=2){
                    setTimeout(function(){
                      leds[i].style.backgroundColor = "lightGreen";
                    }, (i/2)*0.1*1000);
                  }
                })
              }

            </script>
          </div>


          <div class="pythonCode">
            <pre class="line-numbers"><code class="language-python" >
              import board
              import neopixel
              import time

              pixels = neopixel.NeoPixel(board.GP0, 20)

              i = 0   # initialize variable
              while (i < 20):   # loop
                  pixels[i] = (0,10,0)
                  i = i + 2   # increment i
                  time.sleep(0.1)
            </code></pre>
          </div>

          <p>
            Now to make it run forever, we stick it into an infinite loop (line 7). And we also need reset the pixels (make them black) in-between each iteration of the infinite loop (lines 14-16):
          </p>

          <div class="LedAnimation">
            <input type="button" onclick="ex_2x()"  value="Play">
            <input type="button" onclick="resetLEDs()"  value="Reset">
            <script type="text/javascript">
              //create blank led strip
              var leds = getLEDs();
              var ct = 0;

              function ex_2x(){
                animateLEDs( function(leds){
                  for (let n=0; n<10; n++){
                    dt = n * 12*0.1*1000;
                    for (let i=0; i<leds.length; i+=2){
                      setTimeout(function(){
                        leds[i].style.backgroundColor = "lightGreen";
                      }, dt+10+(i/2)*0.1*1000);
                    }
                    for (let i=0; i<leds.length; i+=2){
                      setTimeout(function(){
                        leds[i].style.backgroundColor = "black";
                      }, dt);
                    }
                  }

                })
              }

            </script>
          </div>


          <div class="pythonCode">
            <pre class="line-numbers" data-line="7, 14-16"><code class="language-python" >
              import board
              import neopixel
              import time

              pixels = neopixel.NeoPixel(board.GP0, 20)

              while True:
                  i = 0   # initialize variable
                  while (i < 20):   # loop
                      pixels[i] = (0,10,0)
                      i = i + 2   # increment i
                      time.sleep(0.1)

                  # reset leds
                  for n in range(20):
                      pixels[n] = (0,0,0)

            </code></pre>
          </div>


        </div>
        <!-- END LEFT COLUMN -->

        <!-- RIGHT COLUMN -->
        <div class="uSection">


        </div>
        <!-- END RIGHT COLUMN -->

      <!-- END ROW -->











    </div>

    <!-- FOOTER -->
    <div class="nav">
      <hr>
      <a href="./lighting-lights.html">Prev: Lighting Lights</a>
      <a href="../leds/index.html">LEDs Index</a>
      <a href="./if.html">Next: If statements</a>
    </div>
    <!-- END FOOTER -->


  </body>

  <script type="text/javascript" src="../prism.js"></script>
  <script type="text/javascript" src="../exercises.js"></script>

</html>
