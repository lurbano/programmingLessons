<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">

    <title>LED Lighting</title>

    <link href="../prism.css" rel="stylesheet" />
    <link href="../programmingLessons.css" rel="stylesheet" />

    <script type="text/javascript" src="../uSvg-0.4.js"></script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS_SVG">
    </script>
    <script type="text/javascript" src="../jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="../exercises.js"></script>

    <style media="screen">

    </style>

  </head>
  <body>
    <!-- HEADERS -->
    <div class="nav">
      <a href="../index.html">← Main</a>
      <a href="../quickRef/">Quick Ref</a>
      <a href="../physics.html">Physics</a>
      <a href="../preCalc.html">preCalc</a>
      <a href="../progElective.html">Prog. Elec.</a>
      <a href="../leds/index.html">LEDs</a>
      <hr>
    </div>
    <!-- END HEADERS -->

    <div class="intro">
      <h1>Lesson 1: Lighting Lights</h1>

      <div style="">
        <div class="test" style='padding:2em;'>
          The basics of controlling the LED strip.
        </div>



      </div>
    </div>




    <div class="mainTable" style="grid-template-columns: 2fr 1fr;">


      <!-- NEW ROW -->
        <!-- LEFT COLUMN -->
        <div class="comment">
          <h2>Turning on a light</h2>

          <!-- led Sim -->
          <script type="text/javascript">
            var leds = getLEDs();
            leds[2].style.backgroundColor = "red";
          </script>
          <!-- end led Sim -->

          <p>
            Examine the <i>test1.py</i> file:
          </p>
            <pre class="line-numbers"><code class="language-python" >
            import board
            import neopixel

            pixels = neopixel.NeoPixel(board.D18, 20)

            pixels[2] = (10,0,0)
            </code></pre>

            Looking through the code line by line:<br>
            <p>
              <b>Lines 1 and 2</b>:
              <pre  class="line-numbers" data-start="1"><code class="language-python" >
                import board
                import neopixel
              </code></pre>
              Import two modules that we need to light the LED's.
              <ul>
                <li><b>import board</b>: The board module helps control the general purpose input/output (GPIO) pins on the Pi.</li>
                <li><b>import neopixel</b>: The neopixel module specifically focuses on operating this type (WS2811) of individually addressable LED lights.</li>
              </ul>
            </p>
            <p>
              <b>Line 4</b>:
              <pre class="line-numbers" data-start="4"><code class="language-python" >
              pixels = neopixel.NeoPixel(board.D18, 20)
              </code></pre>
              This activates the LED strip. Specifically it indicates that:
              <ul>
                <li><b>pixels =</b>: It gives the strip a variable name, <b>pixels</b> so we can refer to it later.</li>
                <li><b>neopixel.NeoPixel()</b>: it uses an object called <b>NeoPixel</b> from the <b>neopixel</b> library we imported on line 2.</li>
                <li><b>board.D18</b>: indicates that the strip is being controlled by the <b>GPIO 18</b> pin, (you can look at the Pi and see that the data wire of the LED is connected to Pin 18)</li>
                <li><b>20</b>: there are <b>20</b> LED's in the strip.</li>
              </ul>
            </p>
            <p>
              <b>Line 6</b>:
              <pre  class="line-numbers" data-start="6"><code class="language-python" >
              pixels[2] = (10,0,0)
              </code></pre>
              This makes the third light red.
              <ul>
                <li><b>pixels</b>: this is the variable that refers to the LED strip that we created on Line 4 that comes from the <i>neopixel</i> library we imported on Line 2.</li>
                <li><b>[2]</b>: the <i>pixels</i> variable has an array that refers to each LED light, all 20 of them. However, the array indices starts at 0 so the <b>2</b> here refers to the third LED.</li>
                <li><b>(10,0,0)</b>: sets the color. Colors are RGB--(red, blue, green). The color values range from <b>0</b> to <b>255</b>, so <code>(10,0,0)</code> indicates a low level of red, but no green or blue. Thus the third light shows a faint red.</li>
              </ul>
            </p>


        </div>
        <!-- END LEFT COLUMN -->

        <!-- RIGHT COLUMN -->
        <div class="comment">

          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">
              <h4>Assignment 1</h4>
              Light up the 5th light.
              <script type="text/javascript">
                var leds = getLEDs();
                leds[4].style.backgroundColor = "red";
              </script>
            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                pixels[4] = (10,0,0)
                </code></pre>
              </div>
            </div>
          </div>
          <!-- END ASSIGNMENT -->


          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">
              <h4>Assignment 2</h4>
              Make the second light green.
              <script type="text/javascript">
                var leds = getLEDs();
                leds[1].style.backgroundColor = "lightgreen";
              </script>
            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                pixels[1] = (0,20,0)
                </code></pre>
              </div>
            </div>
          </div>
          <!-- END ASSIGNMENT -->




          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">
              <h4>Assignment 3</h4>

              Make the fourth light yellow.

              <script type="text/javascript">
                var leds = getLEDs();
                leds[3].style.backgroundColor = "yellow";
              </script>
            </div>

            <div class="toggle-next">Notes ▼</div>
            <div class="results" hidden>

              Colors are RGB (red, blue, green). With light, you get yellow when you mix red and green. You can search for "color picker" if you'd like to find your own custom color, just note that some colors are not represented accurately by the LED's.
            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                pixels[3] = (255,255,0)
                </code></pre>
              </div>
            </div>

          </div>
          <!-- END ASSIGNMENT -->

        </div>
        <!-- END RIGHT COLUMN -->

      <!-- END ROW -->



      <!-- NEW ROW -->
        <!-- LEFT COLUMN -->
        <div class="comment">
          <h2>Reverse Indexing (in python)</h2>

          <p>
            Make the last light blue (using reverse indexing in python).
          </p>

          <script type="text/javascript">
            var leds = getLEDs();
            leds[19].style.backgroundColor = "deepskyblue";
          </script>

          <p>
            With 20 pixels you can light up the last one using reverse indexing:
          </p>
          <div class="pythonCode">
            <pre><code class="language-python" >
              pixels[-1] = (0,0,100)
            </code></pre>
          </div>

          <p>
            which gives the same result as:
          </p>
          <div class="pythonCode">
            <pre><code class="language-python" >
              pixels[19] = (0,0,100)
            </code></pre>
          </div>

          <p>
            This is quite useful, because to do the second to last pixel, you'd use:
          </p>
          <div class="pythonCode">
            <pre><code class="language-python" >
              pixels[-2] = (0,0,100)
            </code></pre>
          </div>


          <p>
            So the full code to turn the last light blue would be:
          </p>


          <div class="pythonCode">
            <pre class="line-numbers"><code class="language-python" >
            import board
            import neopixel

            pixels = neopixel.NeoPixel(board.D18, 20)

            pixels[-1] = (0,0,100)
            </code></pre>
          </div>

        </div>
        <!-- END LEFT COLUMN -->

        <!-- RIGHT COLUMN -->
        <div class="comment">

          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">
              <h4>Assignment 5</h4>
              Make the last three lights red, blue, and green respectively.
              <script type="text/javascript">
                nPix = 20;  leds = getLEDs();
                leds[nPix-3].style.backgroundColor = "red";
                leds[nPix-2].style.backgroundColor = "deepskyblue";
                leds[nPix-1].style.backgroundColor = "lightgreen";
              </script>
            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                pixels[-3] = (100,0,0)
                pixels[-2] = (0,100,0)
                ...
                </code></pre>
              </div>
            </div>
          </div>
          <!-- END ASSIGNMENT -->



        </div>
        <!-- END RIGHT COLUMN -->

      <!-- END ROW -->





      <!-- NEW ROW -->
        <!-- LEFT COLUMN -->
        <div class="comment">
          <h2><code>for ... in ...</code> loops </h2>

          <p>
            Light up the first 10 lights.
          </p>

          <script type="text/javascript">
            var leds = getLEDs();
            for (let i=0; i<10; i++){
              leds[i].style.backgroundColor = "deepskyblue";
            }
          </script>

          <p>
            While you could type out all 10 lines of code, whenever you have to do the same thing over and over again, it's easier to make a loop.
          </p>
          <div class="pythonCode">
            <pre><code class="language-python" >
              for i in range(10):
                pixels[i] = (0,0,100)
            </code></pre>
          </div>

          <p>
            this makes a loop that repeats 10 times, but every time <b>i</b> takes a different value. <b>i</b> goes from 0 to 9: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]. Notice that in going from 0 to 9 there are 10 values.
          </p>

          <p>
            The <code>range</code> function has more flexibility than just this if you pass it more values. The general form is:
          </p>
          <div class="pythonCode">
            <pre><code class="language-python" >
              range(start, stop, step):
            </code></pre>
          </div>

          <p>
            <ol>
              <li><b>start</b>: starting value</li>
              <li><b>stop</b>: stopping value (actually, it stops at one less than this value)</li>
              <li><b>step</b>: how much to skip every time you go through the loop.</li>
            </ol>
          </p>

          <p>
            If you leave out the step value (e.g. <code>range(3, 10)</code>), it assumes a step of 1.
          </p>


          <p>
            So the full code to turn first every other light you can use a step of 2:
          </p>

          <script type="text/javascript">
            var leds = getLEDs();
            for (let i=0; i<10; i+=2){
              leds[i].style.backgroundColor = "deepskyblue";
            }
          </script>

          <div class="pythonCode">
            <pre class="line-numbers"><code class="language-python" >
            import board
            import neopixel

            pixels = neopixel.NeoPixel(board.D18, 20)

            for i in range(0, 10, 2):
              pixels[i] = (0,0,100)
            </code></pre>
          </div>

        </div>
        <!-- END LEFT COLUMN -->

        <!-- RIGHT COLUMN -->
        <div class="comment">

          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">
              <h4>Assignment 6</h4>
              Make the first 16 lights green.
              <script type="text/javascript">
                nPix = 20;  leds = getLEDs();
                for (let i=0; i<16; i+=1){
                  leds[i].style.backgroundColor = "lightGreen";
                }
              </script>
            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                for i in range(16):
                  pixels[i] = (0,100,0)
                </code></pre>
              </div>
            </div>
          </div>
          <!-- END ASSIGNMENT -->



          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">
              <h4>Assignment 7</h4>
              Make the first 5 lights red, and the rest blue.
              <script type="text/javascript">
                nPix = 20;  leds = getLEDs();
                for (let i=0; i<5; i+=1){
                  leds[i].style.backgroundColor = "red";
                }
                for (let i=5; i<nPix; i+=1){
                  leds[i].style.backgroundColor = "deepskyblue";
                }
              </script>
            </div>

            <div class="toggle-next">Hint ▼</div>
            <div class="results" hidden>
              Use two loops.
            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                for i in range(5):
                  pixels[i] = (100,0,0)
                for i in range(5, 20):
                  pixels[i] = (0,0,100)
                </code></pre>
              </div>
            </div>


          </div>
          <!-- END ASSIGNMENT -->




          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">
              <h4>Assignment 8</h4>
              From light 4 to light 16 make every other light red.
              <script type="text/javascript">
                nPix = 20;  leds = getLEDs();
                for (let i=3; i<16; i+=2){
                  leds[i].style.backgroundColor = "red";
                }
              </script>
            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                for i in range(3, 16, 2):
                  pixels[i] = (100,0,0)
                </code></pre>
              </div>
            </div>


          </div>
          <!-- END ASSIGNMENT -->



          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">
              <h4>Assignment 9</h4>
              Alternate the colors blue and red for the entire strip.

              <script type="text/javascript">
                nPix = 20;  leds = getLEDs();
                for (let i=0; i<nPix; i+=2){
                  leds[i].style.backgroundColor = "deepskyblue";
                }
                for (let i=1; i<nPix; i+=2){
                  leds[i].style.backgroundColor = "red";
                }
              </script>

              <p>
                Use loops to do this. However, you could also use a single loop and a conditional statement (<code>if</code>).
              </p>

            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                for i in range(0, 20, 2):
                  pixels[i] = (0,0,100)
                for i in range(1, 20, 2):
                  pixels[i] = (100,0,0)
                </code></pre>
              </div>
            </div>

            <div class="toggle-next">Code (if) ▼</div>
            <div class="results" hidden>
              <p>
                This uses the modulus operator (<b>%</b>) to check if the remainder when <b>i</b> is divided by 2. If <b>i</b> is even then the remainder is <b>0</b> so we make the LED blue, <b>else</b> we make it red.
              </p>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                for i in range(0, 20, 2):
                  if (i%2 == 0):
                    pixels[i] = (0,0,100)
                  else:
                    pixels[i] = (100,0,0)
                </code></pre>
              </div>

            </div>


          </div>
          <!-- END ASSIGNMENT -->


        </div>
        <!-- END RIGHT COLUMN -->

      <!-- END ROW -->




      <!-- NEW ROW -->
        <!-- LEFT COLUMN -->
        <div class="comment">
          <h2>Light Sequences: Change over time </h2>

          <p>
            Make all of the lights light up one at a time (with a 0.25 second delay between each lighting up.)
          </p>

          <div class="LedAnimation">
            <input type="button" onclick="ex_light1()"  value="Play">
            <input type="button" onclick="resetLEDs()"  value="Reset">
            <script type="text/javascript">
              //create blank led strip
              var leds = getLEDs();

              function ex_light1(){
                animateLEDs( function(leds){
                  for (let i=0; i<leds.length; i++){
                    setTimeout(function(){
                      leds[i].style.backgroundColor = "red";
                    }, i*0.25*1000);
                  }
                })
              }

            </script>
          </div>

          <p>
            Here you just need to wait a moment (0.25 seconds to be exact) before lighting up the next light. We can do this by using the <b>time</b> module and the <b>sleep</b> function.
          </p>
          <p>
            First import <b>time</b>:
          </p>
            <pre><code class="language-python" >
              import time
            </code></pre>
          <p>
            Then use the <b>sleep</b> function to pause the program for the specified number of seconds, like so:
          </p>
          <pre class="language-python" ><code>
            time.sleep(0.25)
          </code></pre>

          <p>
            The <b>sleep</b> function needs to be inside the loop so that the loop pauses during each iteration. The full program would look like:
          </p>
          <pre class="language-python" data-line="3,9"><code>
                import board
                import neopixel
                import time

                pixels = neopixel.NeoPixel(board.D18, 20)

                for i in range(20):
                  pixels[i] = (10,0,0)
                  time.sleep(0.25)
              </code></pre>
        </div>
        <!-- END LEFT COLUMN -->

        <!-- RIGHT COLUMN -->
        <div class="comment">

          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">
              <h4>Assignment 10</h4>

                Light every other light, but pause 0.5 seconds before each new one lights up.

              <div class="LedAnimation">
                <input type="button" onclick="ex_light2()"  value="Play">
                <input type="button" onclick="resetLEDs()"  value="Reset">
                <script type="text/javascript">
                  //create blank led strip
                  var leds = getLEDs();

                  function ex_light2(){
                    animateLEDs( function(leds){
                      for (let i=0; i<leds.length; i+=2){
                        setTimeout(function(){
                          leds[i].style.backgroundColor = "red";
                        }, i*0.25*1000);
                      }
                    })
                  }
                </script>
              </div>
            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                for i in range(0, 20, 2):
                  pixels[i] = (0,100,0)
                  time.sleep(0.5);
                </code></pre>
              </div>
            </div>
          </div>
          <!-- END ASSIGNMENT -->


          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">
              <h4>Assignment 11</h4>

                Make all of the lights green, keep them green for 0.5 seconds, and then change them to red going backwards from the end. Use a 0.1 second delay before each switch.

              <div class="LedAnimation">
                <input type="button" onclick="ex_light3()"  value="Play">
                <input type="button" onclick="resetLEDs()"  value="Reset">
                <script type="text/javascript">
                  //create blank led strip
                  var leds = getLEDs();

                  function ex_light3(){
                    animateLEDs( function(leds){

                      for (let i=0; i<leds.length; i+=1){
                        leds[i].style.backgroundColor = "green";
                      }

                      for (let i=0; i<leds.length; i+=1){
                        setTimeout(function(){
                          leds[19-i].style.backgroundColor = "red";
                        }, 0.5*1000 + i*0.1*1000);
                      }
                    })
                  }
                </script>
              </div>
            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                import board
                import neopixel

                pixels = neopixel.NeoPixel(board.D18, 20)

                for i in range(0, 20):
                  pixels[i] = (0,100,0)
                for i in range(0, 20):
                  pixels[-i-1] = (100,0,0)
                  time.sleep(0.5);
                </code></pre>
              </div>
            </div>
          </div>
          <!-- END ASSIGNMENT -->


          <!-- BEGIN ASSIGNMENT -->
          <div class='assignment'>
            <div class="instruction">
              <h4>Assignment 12</h4>

                Over 2.5 seconds have a single light of the 20 light up and march across the strip, with all the other lights being black.

                <div class="LedAnimation">
                  <input type="button" onclick="ex_light2()"  value="Play">
                  <input type="button" onclick="resetLEDs()"  value="Reset">
                  <script type="text/javascript">
                    //create blank led strip
                    var leds = getLEDs();

                    function ex_light2(){
                      animateLEDs( function(leds){
                        for (let i=0; i<leds.length; i++){
                          setTimeout(function(){
                            if (i>0){
                              leds[i-1].style.backgroundColor = "black";
                            }
                            leds[i].style.backgroundColor = "red";
                          }, i*0.25*1000);
                        }
                      })
                    }
                  </script>
                </div>

            </div>

            <div class="toggle-next">Code ▼</div>
            <div class="results" hidden>

              <div class="pythonCode">
                <pre class="line-numbers"><code class="language-python" >
                consider this a challenge problem.
                </code></pre>
              </div>
            </div>
          </div>
          <!-- END ASSIGNMENT -->





        </div>
        <!-- END RIGHT COLUMN -->

      <!-- END ROW -->





    </div>


  </body>

  <script type="text/javascript" src="../prism.js"></script>
  <script type="text/javascript" src="../exercises.js"></script>

</html>
