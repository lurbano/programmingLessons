<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>

    <link href="../prism.css" rel="stylesheet" />
    <link href="../programmingLessons.css" rel="stylesheet" />


    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS_SVG">
    </script>

    <style media="screen">

    </style>

  </head>
  <body>
    <h1>Linear Relations</h1>

    <div class="setup">
      Given a relation between x and y, determine if the relation is linear.
      <ul>
        <li>visually</li>
        <li>programatically</li>
      </ul>
        Relation:
        <pre>
          x = [5, 1, -10, -5, -4, -9, -6, -3, -1, 9]
          y = [5, -3, -25, -15, -13, -23, -17, -11, -7, 13]
        </pre>

      <figure>
          <img src="lr-01.png" style="width:400px;">
          <figcaption>Fig 1. Plot showing the relationship between x and y.</figcaption>
      </figure>
    </div>


    <table>



      <tr>
        <th>Notes and Code</th>
        <th>Outcome</th>
      </tr>

      <!-- NEW ROW -->
      <tr>
        <td>
          <div class="comment">
            <h3>Plotting points</h3>
            You could go in by hand and draw each point as a sphere, however, it is easier if we use a loop.
          </div>
          <div class="pythonCode">
            <pre class="line-numbers"><code class="language-python" >
              x = [5, 1, -10, -5, -4, -9, -6, -3, -1, 9]
              y = [5, -3, -25, -15, -13, -23, -17, -11, -7, 13]

              for i in range(len(x)):
                  sphere(pos = vec( x[i], y[i], 0 ), radius = 0.5)
            </code></pre>
          </div>

          <div class="comment">


            one Lines 1 and 2 we make two <code>lists</code> of the x and y values. Any value in a list can be referenced using the index for its location. The first value in the <code>x</code> list would be referenced by <code>x[0]</code> (the value is 5). The second item in the <code>x</code> list would be <code>x[1]</code> (which is equal to 1).
            <p>

            on Line 4, we make a <code>for</code> loop that checks the length of the list <code>x</code> and loops that many times. Each time it loops, it makes the variable <code>i</code> equal to the index of the loop (so <code>i</code> goes from 0 to 9 in this case, since the <code>x</code> list has 10 items in it).
            <p>
            on Line 5, we set the position of the spheres to the x and y values that go with the index <code>i</code>. So, the first time through the loop, line 5 is interpreted as:
            <pre><code class="language-python" >
                  sphere(pos = vec( x[0], y[0], 0 ), radius = 0.5)
            </code></pre>
            which gives the first values in the x and y lists, making the vector equivalent to <code>vec( 5, 5, 0)</code>.
            <p>
              The second time through the loop <code>i</code> becomes 1 so:
              <pre><code class="language-python" >
                    sphere(pos = vec( x[1], y[1], 0 ), radius = 0.5)
              </code></pre>
              and the vector becomes <code>vec( 1, -3, 0 )</code>
          </div>
        </td>
        <td>
          <div class="graph">
            <img src="lr-02.png" style="width:400px;">
          </div>
        </td>
      </tr>
      <!-- END ROW -->

      <!-- NEW ROW -->
      <tr>
        <td>

          <div class="comment">
            <h3>Programatic Linear Relations</h3>
            There are a number of ways to do this, but we'll try this one:
            <ol>
              <li>Take the first two coordinates and determine the equation of the straight line between them.</li>
              <li>Compare the rest of the points to the first point and see if the equations are the same.</li>
            </ol>
          </div>

          1) The equation of a straight line is perfectly described by its slope (m) and intercept (b). So, take the first two points and determine <code>m</code> and <code>b</code>.
          <div class="toggle-next">Show Notes ▼</div>
          <div class="pythonCode" hidden>
            <pre><code class="language-python">
              # slope between the first two points:
              m = (y[1] - y[0]) / (x[1] - x[0])
              print(m)
            </code></pre>
          </div>

        </td>
        <td>

          <div class="graph">
            <img src="lr-03.png" style="width:400px;">
          </div>

        </td>
      </tr>
      <!-- END ROW -->


      <!-- NEW ROW -->
      <tr>
        <td>

          <div class="comment">
            Now we need to make a loop that starts from the third point and goes to the end of the <code>x</code> list.
          </div>
          <div class="toggle-next">Show Notes ▼</div>
          <div class="pythonCode" hidden>
            <pre><code class="language-python">
              # loop through the rest of the x list (items 2 through the end).
              for i in range(2, len(x)):
                  print(i)
            </pre></code>
          </div>
          <div class="comment">
            As you can see, this prints out the values 2 through 9. When given two values, the <code>range</code> function interprets the first as the starting value and the second as the stop.
          </div>


        </td>
        <td>

          <div class="graph">
            <img src="lr-04.png">
          </div>

        </td>
      </tr>
      <!-- END ROW -->

      <!-- NEW ROW -->
      <tr>
        <td>

          <div class="comment">
            <h3>Comparing slope and intercept values. </h3>
            Now assume that each time through the loop we calculate the slope and intercept and call them <code>new_m</code> and <code>new_b</code>. We can check to see if the new values are the same as the original values. If they're not, we print that the relationship is not linear and break out of the loop.
          </div>
          <div class="pythonCode">
            <div class="toggle-next">Show Notes ▼</div>
            <div class="test" hidden>

              <pre><code class="language-python">
                # loop through the rest of the x list (items 2 through the end).
                for i in range(2, len(x)):
                    print(i)
                    new_m = ...
                    new_b = ...
                    if m == new_m:
                        print("Same slope (m)")
                    else:
                        print("Different slope (m)")
                        break
              </code></pre>
            </div>
            <p>
              Peek at the code for the new_m and new_b:
            <div class="toggle-next">Show Notes ▼</div>
            <div class="test" hidden>
              <pre><code class="language-python">
                # loop through the rest of the x list (items 2 through the end).
                for i in range(2, len(x)):
                    print(i)
                    new_m = (y[i] - y[0]) / (x[i] - x[0])
                    new_b = y[0] - new_m * x[0]
                    if m == new_m:
                        print("Same slope (m)")
                    else:
                        print("Different slope (m)")
                        break
              </code></pre>
            </div>
          </div>

        </td>
        <td>

          <div class="graph">
            <img src="lr-05.png" >
          </div>

        </td>
      </tr>
      <!-- END ROW -->

      <!-- NEW ROW -->
      <tr>
        <td>

          <div class="code">
            <div class="comment">
              <h3>Testing</h3>
              Click the link below to get a new dataset. There will be a 50-50 chance that it is a linear relation.
              <div id="getLRData" class="myButton">
                Generate Dataset
              </div>
            </div>
            <pre><code class="language-python" id="lrData">

            </code></pre>
            Answer: if linear:
            <div class="toggle-next">Show Notes ▼</div>
            <div id="isLinear" hidden>
            </div>
          </div>

        </td>
        <td>

          <div class="graph">

          </div>

        </td>
      </tr>
      <!-- END ROW -->



    </table>

  </body>
  <script type="text/javascript" src="../jquery-3.6.0.min.js"></script>
  <script type="text/javascript" src="../prism.js"></script>
  <script type="text/javascript" src="../exercises.js"></script>
  <script type="text/javascript">
    $("#getLRData").click(function(){
      console.log("clicked");
      let n = 10;
      let min = -10;
      let max = 10;

      let m = Math.round(10*(Math.random()-0.5))
      let b = Math.round(10*(Math.random()-0.5))

      let isLinear = Math.random()-0.5;
      console.log("isLinear: ", isLinear);

      let x = [];
      let y = [];
      while (x.length < n ){
        let v = Math.random() * (max - min) + min;
        v = Math.round(v);
        let l_repeated = false;
        for (let j = 0; j<x.length; j++){
          if (x[j] === v) l_repeated = true;
        }
        if (!l_repeated){
          x.push(v);

          if (isLinear > 0){
            y.push(m*v+b);
          }
          else {
            let r = Math.round((Math.random()-0.5)* 10);
            y.push(m*v+b+r);
          }
        }
      }
      console.log(x);
      console.log(y);

      let tx = "x = [";
      let ty = "y = [";
      for (let i = 0; i< x.length; i++){
        tx += x[i] + ", ";
        ty += y[i] + ", ";
      }
      tx = tx.slice(0,-2) + "]";
      ty = ty.slice(0,-2) + "]";
      $("#lrData").html(tx + "\n" + ty);

      tLinear = isLinear > 0 ? "Is Linear" : "Not Linear";
      $("#isLinear").html(tLinear);

    })

  </script>
</html>
